# Matlab

matrix laboratory 矩阵实验室

## matlab语言的主要功能

* 数值计算
* 符号计算
* 图形绘制
* 程序流程控制
* 工具箱

## 一、matlab基础知识

### 1.1 MATLAB系统环境

#### 切换工作路径

```matlab
>> cd D:\Desktop\work
>> 
```

#### 工作区/工作空间

显示当前存在变量的详细信息

#### matlab的搜索路径

变量-->内部函数-->当前文件夹下的程序文件-->文件搜索路径文件夹中的程序文件

```matlab
>> clear
>> x = sin(1)

x =

    0.8415

>> sin = [1 2 3 4 5]

sin =

     1     2     3     4     5

>> x = sin(1)

x =

     1
```

> 可以看出当变量名和内部函数名冲突时，变量名优先于内部函数  

> 建议不要使用关键词作为变量名

#### matlab文件搜索路径

```matlab
>> path(path,'D:\Desktop\work')
>> 
```

或者使用  主页-->设置路径

### 1.2 MATLAB数值数据

#### 数值数据的类型分类

* 整型

  * 不带符号整数 8位 16位 32位 64位
  * 带符号整数 8位 16位 32位 64位

  ```matlab
  >> x = int8(129)
  
  x =
  
    int8
  
     127
  
  >> x = uint8(129)
  
  x =
  
    uint8
  
     129
  
  ```

  > 注意数据类型的范围大小

* 浮点型

  浮点型可以分为单精度（4B）和双精度（8B）

  *  single函数 ：将其他类型的数据转换为单精度类型
  * double函数：将其他类型的数据转换为双精度类型

  ```matlab
  >> class(4)
  
  ans =
  
  double
  >> class(single(4))
  
  ans =
  
  single
  ```

  > class()  显示参数的数据类型

* 复数型

  复型数据包括实部和虚部两个部分，实部和虚部默认为双精度型，虚数单位用i或者是j来表示

  ```matlab
  >>  6+5i
  
  ans =
  
     6.0000 + 5.0000i
  
  >> 6+5j
  
  ans =
  
     6.0000 + 5.0000i
  ```

  * real函数  求复数的实部
  * imag函数 求复数的虚部

  ```matlab
  >> real(a)
  
  ans =
  
       6
  
  >> imag(a)
  
  ans =
  
       8
  ```

#### 数据的输出格式

```matlab
>> format long
>> 50/3

ans =

  16.666666666666668

>> format
>> 50/3

ans =

   16.6667
```

#### 常用数学函数

* exp（）MATLAB中我们常常需要用到自然数对数底数 e ,需要输入e 的不同次幂，那么我们在MATLAB中具体应如何操作呢？

  ```matlab
  >> a = [1,2;3,4] 
  
  a =
  
       1     2
       3     4
  
  >> B = exp(a) 
  
  B =
  
      2.7183    7.3891
     20.0855   54.5982
  ```

* 三角函数有以弧度为单位的函数和以角度为单位的函数，如果是以角度为单位的函数就在函数名后面加“d”，以示区别。

  ```matlab
  >> sin(pi/2)
  
  ans =
  
       1
  
  >> sind(90)
  
  ans =
  
       1
  ```

* abs函数可以求实数的绝对值、复数的模、字符串的ASCII码值。

  ```matlab
  >> abs(-4)
  
  ans =
  
       4
  
  >> abs(1+3i)
  
  ans =
  
      3.1623
  
  >> abs('a')
  
  ans =
  
      97
  ```

* 用于取整的函数有fix、floor、ceil、round。

  * round函数按照四舍五入的规则取整。
  * ceil函数是向上取整，取大于等于这个数的第一个整数。
  * floor函数是向下取整，取小于等于这个数的第一个整数。
  * fix函数是固定取靠近0的那个整数，即舍去小数取整。

  ```matlab
  >> round(3.7)
  
  ans =
  
       4
  
  >> ceil(-3.6)
  
  ans =
  
      -3
  
  >> floor(3.7)
  
  ans =
  
       3
  
  >> fix(2.7)
  
  ans =
  
       2
  ```

* 求一个三位正整数的个位 百位 十位

  ```matlab
  >> m = 345
  
  m =
  
     345
  
  >> m1 = rem(m,100) %对m模100
  
  m1 =
  
      45
  
  >> m2 = fix(m/100)
  
  m2 =
  
       3
  
  >> m3 = fix(m1/10)
  
  m3 =
  
       4
  
  >> m4 = rem(m,10)
  
  m4 =
  
       5
  ```

* 输出1到100的所有素数

  ```matlab
  >> m = 1:100;
  >> m1 = isprime(m);   %
  >> m2 = find(m1);
  >> m3 = m(m2)
  
  m3 =
  
    1 至 23 列
  
       2     3     5     7    11    13    17    19    23    29    31    37    41    43    47    53    59    61    67    71    73    79    83
  
    24 至 25 列
  
      89    97
  ```

  

### 1.3变量及其操作

#### 变量命名规则

变量以字母开头，后接字母、数字或者是下划线的字符序列最多63个字符

* 区分大小写
* 标准函数名以及命令名必须要小学字母

#### 赋值语句两种格式

* 变量=表达式
* 表达式（默认将结果赋值给预定变量ans）

> 命令行后面加分号，不显示运算结果

```matlab
>> x = sqrt(7)-2i

x =

   2.6458 - 2.0000i

>> y = exp(pi/2);
>> z = ((5+cosd(47))/(1+abs(x-y))) 

z =

    1.4395
```

#### 预定义变量

预定义变量是系统本身定义的变量

* ans是默认赋值变量
* i和j是虚数单位
* pi是圆周率
* NaN是非数

#### 变量的管理

* 变量的删除和修改（可在工作空间鼠标右键进行操作）

* who 和whos

  ```matlab
  >>  who
  
  您的变量为:
  
  x  y  z  
  
  >> whos
    Name      Size            Bytes  Class     Attributes
  
    x         1x1                16  double    complex   
    y         1x1                 8  double              
    z         1x1                 8  double           
  ```

#### 内存变量文件

用于保存MATLAB工作区变量的文件叫做内存变量文件，其扩展名为.mat，也叫MAT文件。

* save命令：创建内存变量文件

* load命令：装入内存变量文件

  ```matlab
  >>  cd D:\Desktop\work
  >> save mydata x y z
  >> clear
  >> load mydata
  ```

  > mydata 为文件名 可随意取文件名

### 1.4MATLAB矩阵的表示

#### 矩阵的建立

1. 利用直接输入法建立矩阵:将矩阵的元素用中括号括起来，按矩阵行的顺序输入各元素，同一行的各元素之间用逗号或空格分隔，不同行的元素之间用分号分隔。

```matlab
>> A = [1,2,3;4,5,6;7,8,9]

A =

     1     2     3
     4     5     6
     7     8     9
```

2. 利用已建好的矩阵建立更大的矩阵:一个大矩阵可以由已经建立好的小矩阵拼接而成。

   ```matlab
   >> A = [1,2,3;4,5,6;7,8,9]
   
   A =
   
        1     2     3
        4     5     6
        7     8     9
   
   >> A = [1,2,3;4,5,6;7,8,9]
   
   A =
   
        1     2     3
        4     5     6
        7     8     9
   
   >> B = [-1,-2,-3;-4,-5,-6;-7,-8,-9];
   >> C = [A,B;B,A]
   
   C =
   
        1     2     3    -1    -2    -3
        4     5     6    -4    -5    -6
        7     8     9    -7    -8    -9
       -1    -2    -3     1     2     3
       -4    -5    -6     4     5     6
       -7    -8    -9     7     8     9
   ```

3. 可以用实部矩阵和虚部矩阵构成复数矩阵

   ```matlab
   >> A
   
   A =
   
        1     2     3
        4     5     6
        7     8     9
   
   >> B
   
   B =
   
       -1    -2    -3
       -4    -5    -6
       -7    -8    -9
   
   >> D = A+Bi
   未定义函数或变量 'Bi'。
    
   >> D = A+B*i
   
   D =
   
      1.0000 - 1.0000i   2.0000 - 2.0000i   3.0000 - 3.0000i
      4.0000 - 4.0000i   5.0000 - 5.0000i   6.0000 - 6.0000i
      7.0000 - 7.0000i   8.0000 - 8.0000i   9.0000 - 9.0000i
   ```

4. 冒号表达式

   e1:e2:e3    初始值 步长  终止值

   ```matlab
   >> E = 1:2:10
   
   E =
   
        1     3     5     7     9
   ```

   > 省略步长则默认步长为1

5. linspace函数

   linspace(起始值，结束值，个数)

   ```matlab
   >>  linspace(1,10,10)
   
   ans =
   
        1     2     3     4     5     6     7     8     9    10
   ```

   > 当个数省略时，产生100个元素

#### 结构矩阵和单位矩阵

* 结构矩阵

  格式为   结构矩阵元素.成员名=表达式

  ```matlab
  >> a(1).x = '1';a(1).y='2';a(1).z='3';
  >> a(2).x = 1;a(2).y=2;a(2).z=3
  
  a = 
  
    包含以下字段的 1×2 struct 数组:
  
      x
      y
      z
  ```

* 单元矩阵

  建立单元矩阵和一般矩阵相似，直接输入就可以了，只是单元矩阵元素用大括号括起来。

  ```matlab
  >> a = {'a','b',[1,2,3];'c','d',[4,5,6]}
  
  a =
  
    2×3 cell 数组
  
      'a'    'b'    [1×3 double]
      'c'    'd'    [1×3 double]
  ```

### 1.5矩阵元素的引用

* 通过下标来引用矩阵的元素

  ```matlab
  >> a = [1:5;6:10;11:15]
  
  a =
  
       1     2     3     4     5
       6     7     8     9    10
      11    12    13    14    15
  
  >> a(2,2)
  
  ans =
  
       7
  
  >> a(10,10)=10
  
  a =
  
       1     2     3     4     5     0     0     0     0     0
       6     7     8     9    10     0     0     0     0     0
      11    12    13    14    15     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0    10
  ```

* 通过序号来引用

  * 在MATLAB中，矩阵元素按列存储，即首先存储矩阵的第一列元素，然后存储第二列元素，…，—直到矩阵的最后一列元素。
  * 矩阵元素的序号就是矩阵元素在内存中的排列顺序。

  ```matlab
  a =
  
       1     2     3
       4     5     6
  
  >> a(3)
  
  ans =
  
       2
  ```

  > 序号与下标是一—对应的，以m×n矩阵A为例，矩阵元素A(i.j)的序号为(j-1)×m+i。

#### sub2ind函数

将下标转换成存储的序号

```matlab
a =

     1     2     3
     4     5     6
>> D = sub2ind(size(a),[1,2;2,2],[1,2;1,1]) 

D =

     1     4
     2     2
```

#### ind2sub函数

ind2sub将序号转换为下标

```matlab
>> [I,J] = ind2sub([3,3],[1,3,5])

I =

     1     3     2


J =

     1     1     2
```

#### 利用冒号表达式获得子矩阵

```matlab
>> a = [1:5;6:10;11:15]

a =

     1     2     3     4     5
     6     7     8     9    10
    11    12    13    14    15

>> a(1,2,:)

ans =

     2

>> a(1:2,:)

ans =

     1     2     3     4     5
     6     7     8     9    10

>> a(1,1:3:5)

ans =

     1     4

>> a(1,[1,3,5]) 

ans =

     1     3     5

>> a(2:3,1:2:5)

ans =

     6     8    10
    11    13    15
```

#### end运算符

表示某一维的尾末下标

```matlab
A =

     1     2     3     4     5
     6     7     8     9    10
    11    12    13    14    15

>> A(end)

ans =

    15

>> A(2:3,end)

ans =

    10
    15
```

#### 利用空矩阵删除矩阵的元素

```matlab
>> A

A =

     1     2     3     4     5
     6     7     8     9    10
    11    12    13    14    15

>> A(:,2:3)=[]

A =

     1     4     5
     6     9    10
    11    14    15
```

#### 改变矩阵的形状

reshape(A,m,n):在矩阵总元素保持不变的前提下，将矩阵A重新排成m×n的二维矩阵。

> 注意: reshape函数只是改变原矩阵的行数和列数，但并不改变原矩阵元素个数及其存储顺序。

```matlab
>> B = [1:12]

B =

     1     2     3     4     5     6     7     8     9    10    11    12

>> C = reshape(B,3,4)

C =

     1     4     7    10
     2     5     8    11
     3     6     9    12
```

#### A(:)

将矩阵A的每一列元素堆叠起来，成为一个列向量。

```matlab

>> C

C =

     1     4     7    10
     2     5     8    11
     3     6     9    12

>> D = C(:)

D =

     1
     2
     3
     4
     5
     6
     7
     8
     9
    10
    11
    12
```



### 1.6 MATLAB基本运算

#### 算数运算

基本算术运算符:＋(加)、一(减)、*(乘)、/(右除)、\(左除)、^(乘方)。

* MATLAB的算术运算是在矩阵意义下进行的。
* 单个数据的算术运算的一种特例。

##### 加减运算

  * 若两矩阵同型，则运算时两矩阵的相应元素相加减。
  * 若不同型Matlab将会报错
  * 一个标量也可以和矩阵进行加减运算，这时把标量和矩阵的每一个元素进行加减运算。

##### 乘法运算

* 知矩阵A和B进行乘法运算，要求A的列数与B的行数相等，此时则称A、B炬阵是可乘的，或称A和B两矩阵维数和大小相容。
* 如果两者的维数或大小不相容，则将给出错误信息，提示用户两个矩阵是不可乘的。

##### 除法运算

* 在MATLAB中，有两种矩阵除法运算:右除/和左除\。
* 如果A矩阵是非奇异方阵，则B/A等效于`B*inv(A)`，A\B等效于`inv(A)*B`。

> inv(A) 返回矩阵的逆矩阵  
>
> 含有标量的除法可以左除和右除结果一样

##### 乘方运算

* 一个矩阵的乘方运算可以表示成A^x，要求A为方阵，x为标量

  ```matlab
  >> A
  
  A =
  
       1     4     5
       6     9    10
      11    14    15
  
  >> A^2
  
  ans =
  
      80   110   120
     170   245   270
     260   380   420
  ```

##### 点运算

* 点运算符:   `.*`      `./`    `.\`     `.^`。

* 两矩阵进行点运算是指它们的对应元素进行相关运算，要求两矩阵同型。

  ```matlab
  >> A
  
  A =
  
       1     4     5
       6     9    10
      11    14    15
  
  >> A+A
  
  ans =
  
       2     8    10
      12    18    20
      22    28    30
  
  >> A*A
  
  ans =
  
      80   110   120
     170   245   270
     260   380   420
  
  >> A.*
   A.*
      ↑
  错误: 表达式或语句不完整或不正确。
   
  >> A.* A
  
  ans =
  
       1    16    25
      36    81   100
     121   196   225
  ```

#### 关系运算

* 关系运算符:<(小于)、<=(小于或等于)、>(大于)、>=(大于或等于)、==(等于)、～=(不等于)。

* 当两个比较量是标量时，直接比较两数的大小。若关系成立，关系表达式结果为1，否则为0。

  ```matlab
  >> 6>=9
  
  ans =
  
    logical
  
     0
  ```

* 当参与比较的量是两个同型的矩阵时，比较是对两矩阵相同位置的元素按标量关系运算规则逐个进行，最终的关系运算的结果是一个与原矩阵同型的矩阵，它的元素由0或1组成。

* 当参与比较的一个是标量，而另一个是矩阵时，则把标量与矩阵的每一个元素按标量关系运算规则逐个比较，最终的关系运算的结果是一个与原矩阵同型的矩阵，它的元素由0或1组成。

  ```matlab
  A =
  
       1     4     5
       6     9    10
      11    14    15
  
  >> P = rem(A,2)==0
  
  P =
  
    3×3 logical 数组
  
     0   1   0
     1   0   1
     0   1   0
  ```

#### 逻辑运算

* 逻辑运算符:&(与)、I(或)和～(非)。

* 设参与逻辑运算的是两个标量a和b，那么运算规则为:

  * a&b a、b全为非零时，运算结果为1，否则为0。
  * alba、b中只要有一个为非零时，运算结果为1。
  * ~a当a为零时，运算结果为1;当a为非零时，运算结果为0。

* 若参与逻辑运算的是两个同型矩阵，那么将对矩阵相同位置若参与逻辑运算的是两个同型矩阵，那么将对矩阵相同位置原矩阵同型的矩阵，其元素由1或0组成。1.7字符串处理

* 若参与逻辑运算的一个是标量，一个是矩阵，那么将在标量与矩阵中的每个元素之间按标量规则逐个进行运算，最终运算结果是一个与原矩阵同型的矩阵，其元素由1或0组成。

* 水仙花数

  ```matlab
  >> m = 100:999;
  >> m1 = rem(m,10);
  >> m2 = fix(rem(m,100)/10)
  >> m3 = fix(m/100); 
  >> k = find(m==m1.*m1.*m1+m2.*m2.*m2+m3.*m3.*m3)
  
  k =
  
      54   271   272   308
  
  >> m(k)
  
  ans =
  
     153   370   371   407
  
  ```

### 1.7字符串处理

* 在MATLAB中，字符串是用单引号括起来的字符序列。

```matlab
>> str1 = 'asdjlja'

str1 =

asdjlja

>> str1(1:3)

ans =

asd

```

* 若字符串中的字符含有单引号，则该单引号字符要用两个单引号来表示。

  ```matlab
  
  >> str2 = 'I''m a teacher'
  
  str2 =
  
  I'm a teacher
  ```

* 建立多行字符串，形成字符串矩阵。

  ```matlab
  >> mat_str3 = ['abcd';'1234']
  
  mat_str3 =
  
  abcd
  1234
  
  >> mat_str3
  
  mat_str3 =
  
  abcd
  1234
  
  >> mat_str3(2,3)
  
  ans =
  
  3
  ```

* 建立一个字符串向量，然后对该向量做如下处理:

  * ①取第1～5个字符组成的子字符串。

  * ②将字符串倒过来重新排列。

  * ③将字符串中的小写字母变成相应的大写字母，其余字符不变。

  * ④统计字符串中小写字母的个数。

    ```matlab
    >> ch = 'ABc123d4e56Fg9'
    
    ch =
    
    ABc123d4e56Fg9
    
    >> sub = ch(1:5)
    
    sub =
    
    ABc12
    
    >> revch = ch(end:-1:1)
    
    revch =
    
    9gF65e4d321cBA
    
    >> k = find(ch>'a' | ch<'z')
    
    k =
    
         1     2     3     4     5     6     7     8     9    10    11    12    13    14
    
    >> k = find(ch>='a' & ch<='z') 
    
    k =
    
         3     7     9    13
    
    >> ch(k) = ch(k)-('a'-'A')
    
    ch =
    
    ABC123D4E56FG9
    
    >> length(k)
    
    ans =
    
         4
    ```

#### 字符串的执行

eval(s)

```matlab

>> eval('1+2')

ans =

     3
```

#### 字符串与数值之间的转换

* abs和double函数都可以用来获取字符串矩阵所对应的ASCII码数值矩阵。

* char函数可以把ASCII码矩阵转换为字符串矩阵。

  ```matlab
  >> s1 = 'MATLAB'
  
  s1 =
  
  MATLAB
  
  >> abs(s1)
  
  ans =
  
      77    65    84    76    65    66
  
  >> char(abs(s1)+32)
  
  ans =
  
  matlab
  ```

#### 字符串的比较

字符串的比较有两种方法:利用关系运算符或字符串比较函数。

* 关系运算符比较:两个字符串里的每个字符依次按ASCI值大小逐个进行比较，比较的结果是一个数值向量，向量中的元素要么是1，要么是0。

  ```matlab
  >> s2 = 'W123';
  >> s3 = 'w123';
  >> s2 == s3
  
  ans =
  
    1×4 logical 数组
  
     0   1   1   1
  ```

* 字符串比较函数用于判断字符串是否相等，有4种比较方式，函数如下:
  * strcmp(s1,s2):用来比较字符串s1和s2是否相等，如果相等，返回结果为1，否则返回0。
  * strncmp(s1,s2,n):用来比较字符串s1和s2前n个元素是否相等，如果相等，返回结果为1，否则返回0。
  * strcmpi(s1,s2):在忽略大小写的情况下用来比较字符串s1和s2是否相等，如果相等，返回结果为1，否则返回0。
  * strncmpi(s1,s2,n):在忽略大小写的情况下用来比较字符串s1和s2前n个元素是否相等，如果相等，返回结果为1，否则返回0。

#### 字符串的查找与替换

* findstr(s1,s2)︰返回短字符串在长字符串中的开始位置。

* strrep(s1,s2,s3):将字符串s1中的所有子字符串s2替换为字符串s3

* rand函数:产生（0，1）区间均匀分布的随机矩阵。

* randn函数:产生均值为0，方差为1的标准正态分布随机矩阵。

  ```matlab
  >> p = findstr('is','where is here? is asdjl is ') 
  
  p =
  
       7    16    25
   >> result = strrep(' this is a good idea! is','is','aa')
  
  result =
  
   thaa aa a good idea! aa
  ```


## 二、Matlab矩阵处理

### 2.1特殊矩阵

#### 通用的特殊矩阵

* zeros函数：产生全零矩阵，即零矩阵
* ones函数：产生全一矩阵，即幺矩阵
* eye函数：产生对角线为1的矩阵，当矩阵是方阵时，得到单位矩阵
* rand函数:产生（o，1)区间均匀分布的随机矩阵。
* randn函数:产生均值为0，方差为l的标准正态分布随机矩阵。

```matlab

>> zeros(2,2)

ans =

     0     0
     0     0

>> ones(3,5)

ans =

     1     1     1     1     1
     1     1     1     1     1
     1     1     1     1     1

>> eye(3,3)

ans =

     1     0     0
     0     1     0
     0     0     1
```

* 例1：首先产生5阶两位随机整数矩阵A，再产生均值为0.6、方差为0.1的5阶正态分布随机矩阵B，最后验证(A+B)l=lA+BI(l为单位矩阵）。

  ```matlab
  >> A = fix(rand(5)*90+10)
  
  A =
  
      88    48    22    86    16
      17    91    88    65    31
      45    26    62    41    21
      33    33    59    56    26
      82    23    23    46    31
  
  >> B = randn(5)*sqrt(0.1)+0.6
  
  B =
  
      0.4313    0.5890    1.0273    0.2458    0.3263
     -0.0333    0.3476    0.5289    1.3988    0.5442
      0.9049    0.9221    0.4137    1.1235    0.8503
      0.7645    0.5579    0.5071    0.6973    0.1788
      0.5937    0.3740    0.3319    0.2025   -0.1368
  
  >> E = eye(5)
  
  E =
  
       1     0     0     0     0
       0     1     0     0     0
       0     0     1     0     0
       0     0     0     1     0
       0     0     0     0     1
  
  >> (A+B)*E == E*A+B*E
  
  ans =
  
    5×5 logical 数组
  
     1   1   1   1   1
     1   1   1   1   1
     1   1   1   1   1
     1   1   1   1   1
     1   1   1   1   1
  ```

  * rand函数:产生(0，1)开区间均匀分布的随机数x。
  * fix(a+(b-a+1)*x):产生la，b]区间上均匀分布的随机整数。
  * randn函数:产生均值为0、方差为l的标准正态分布随机数x。
  * u+σ×:得到均值为u、方差为σ平方的随机数。

#### 魔方矩阵

* n阶魔方阵由1,2,3,…,n2共n2个整数组成，且每行、每列以及主、副对角线上各n个元素之和都相等。

* n阶魔方阵每行每列元素的和为(7+2+3+…+n2)/n=(n+n的三次方)/2。

  ```matlab
  >> D = magic(3)
  
  D =
  
       8     1     6
       3     5     7
       4     9     2
  ```

#### 范德蒙矩阵

```matlab
>> vander(1:5) 

ans =

     1     1     1     1     1
    16     8     4     2     1
    81    27     9     3     1
   256    64    16     4     1
   625   125    25     5     1

>> vander(5:10) 

ans =

        3125         625         125          25           5           1
        7776        1296         216          36           6           1
       16807        2401         343          49           7           1
       32768        4096         512          64           8           1
       59049        6561         729          81           9           1
      100000       10000        1000         100          10           1
```

#### 希尔伯特矩阵

```matlab
>> format rat
>> hilb(5)

ans =

       1              1/2            1/3            1/4            1/5     
       1/2            1/3            1/4            1/5            1/6     
       1/3            1/4            1/5            1/6            1/7     
       1/4            1/5            1/6            1/7            1/8     
       1/5            1/6            1/7            1/8            1/9     

```

#### 伴随矩阵

MATLAB生成伴随矩阵的函数是compan(p)，其中p是一个多项式的系数向量，高次幂系数排在前，低次幂系数排在后。

```matlab
>> compan([-1,0,2,3,0,1])

ans =

       0              2              3              0              1       
       1              0              0              0              0       
       0              1              0              0              0       
       0              0              1              0              0       
       0              0              0              1              0   
```

#### 帕斯卡矩阵

```matlab
>> format rat
>> A = pascal(6)

A =

       1              1              1              1              1              1       
       1              2              3              4              5              6       
       1              3              6             10             15             21       
       1              4             10             20             35             56       
       1              5             15             35             70            126       
       1              6             21             56            126            252       

>> inv(A)

ans =

       6            -15             20            -15              6             -1       
     -15             55            -85             69            -29              5       
      20            -85            146           -127             56            -10       
     -15             69           -127            117            -54             10       
       6            -29             56            -54             26             -5       
      -1              5            -10             10             -5              1  
```



### 2.2矩阵变换

##### 对角阵

* 对角矩阵:只有对角线上有非零元素的矩阵。
* 数量矩阵:对角线上的元素相等的对角矩阵。
* 单位矩阵:对角线上的元素都为1的对角矩阵。

1. 提取矩阵的对角线元素

   1. diag(A):提取矩阵A主对角线元素，产生一个列向量。
   2. diag(A,k):提取矩阵A第k条对角线的元素，产生一个列向量。

2. 构造对角矩阵

   1. diag(V):以向量V为主对角线元素，产生对角矩阵。

   2. diag(V,k):以向量V为第k条对角线元素，产生对角矩阵。

   3. 例题：建立5x5的矩阵A，对矩阵的第一行x1第二行x2一次类推

      ```matlab
      >> D = diag(1:5)
      
      D =
      
           1     0     0     0     0
           0     2     0     0     0
           0     0     3     0     0
           0     0     0     4     0
           0     0     0     0     5
      
      >> A = [1:5;6:10;11:15;16:20;21:25]
      
      A =
      
           1     2     3     4     5
           6     7     8     9    10
          11    12    13    14    15
          16    17    18    19    20
          21    22    23    24    25
      
      >> D*A
      
      ans =
      
           1     2     3     4     5
          12    14    16    18    20
          33    36    39    42    45
          64    68    72    76    80
         105   110   115   120   125
      ```

   > 对角矩阵左乘 即乘行   右乘 即乘列

##### 三角阵

* 上三角阵:矩阵的对角线以下的元素全为零的矩阵。  triu(A,n)

* 下三角阵:对角线以上的元素全为零的矩阵。 tril(A,n)

  ```matlab
  >> A = ones(4)
  
  A =
  
       1     1     1     1
       1     1     1     1
       1     1     1     1
       1     1     1     1
   >> B = triu(A)
  
  B =
  
       1     1     1     1
       0     1     1     1
       0     0     1     1
       0     0     0     1
  
  >> B = triu(A,1) 
  
  B =
  
       0     1     1     1
       0     0     1     1
       0     0     0     1
       0     0     0     0
  ```

##### 矩阵的转置

* 转置运算符是小数点后面接单引号(.'）。

* 共扼转置，其运算符是单引号(')，它在转置的基础上还要取每个数的复共辄。

  ```matlab
  >> A = [1,2;1-2i,2+3i]
  
  A =
  
     1.0000 + 0.0000i   2.0000 + 0.0000i
     1.0000 - 2.0000i   2.0000 + 3.0000i
  
  >> A.'
  
  ans =
  
     1.0000 + 0.0000i   1.0000 - 2.0000i
     2.0000 + 0.0000i   2.0000 + 3.0000i>> A'
  
  ans =
  
     1.0000 + 0.0000i   1.0000 + 2.0000i
     2.0000 + 0.0000i   2.0000 - 3.0000i
  ```

##### 矩阵的旋转

rot90(A,k):将矩阵A逆时针方向旋转90°的k倍，当k为1时可省略。

```matlab
>> A

A =

   1.0000 + 0.0000i   2.0000 + 0.0000i
   1.0000 - 2.0000i   2.0000 + 3.0000i
>> rot90(A,1) 

ans =

   2.0000 + 0.0000i   2.0000 + 3.0000i
   1.0000 + 0.0000i   1.0000 - 2.0000i

>> rot90(A,2)

ans =

   2.0000 + 3.0000i   1.0000 - 2.0000i
   2.0000 + 0.0000i   1.0000 + 0.0000i

```



##### 矩阵的翻转

fliplr(A) :对矩阵左右翻转

flipud：对矩阵上下翻转

```matlab
>> A = [1:5;6:10;11:15;16:20;21:25]

A =

     1     2     3     4     5
     6     7     8     9    10
    11    12    13    14    15
    16    17    18    19    20
    21    22    23    24    25
>> fliplr(A)

ans =

     5     4     3     2     1
    10     9     8     7     6
    15    14    13    12    11
    20    19    18    17    16
    25    24    23    22    21
 >> flipud(A)

ans =

    21    22    23    24    25
    16    17    18    19    20
    11    12    13    14    15
     6     7     8     9    10
     1     2     3     4     5
```

##### 验证魔方阵的主对角线和副对角线元素之和相等

```matlab
>> A = magic(5)

A =

    17    24     1     8    15
    23     5     7    14    16
     4     6    13    20    22
    10    12    19    21     3
    11    18    25     2     9

>> B = diag(A)

B =

    17
     5
    13
    21
     9

>> C = flipud(A)

C =

    11    18    25     2     9
    10    12    19    21     3
     4     6    13    20    22
    23     5     7    14    16
    17    24     1     8    15

>> D = diag(C)

D =

    11
    12
    13
    14
    15

>> sum(B)

ans =

    65

>> sum(D)

ans =

    65
```



##### 矩阵求逆

* 对于一个方阵A，如果存在一个与其同阶的方阵B，使得AB=BA=l(I为单位矩阵)，则称B为A的逆矩阵，当然，A也是B的逆矩阵。

* inv(A)  求方阵A的逆矩阵

* A*x=b   x=A-1*b   求解方程组

  ```matlab
  >> A = [1,2,3;1,4,9;1,8,27];
  >> b = [5;-2;6];
  >> x = inv(A)*b
  
  x =
  
     23.0000
    -14.5000
      3.6667
  ```

### 2.3矩阵求值

##### 矩阵的行列式值

* 把一个方阵看作一个行列式，并对其按行列式的规则求值，这个值就称为方阵所对应的行列式的值。

* det(A):求方阵A所对应的行列式的值。

* 验证A的行列式的倒数和A的逆矩阵行列式值相等

  ```matlab
  >> A = [1,2,3;1,4,9;1,8,27];
  >> A
  
  A =
  
       1     2     3
       1     4     9
       1     8    27
    
  >> 1/det(A)==det(inv(A)) 
  
  ans =
  
    logical
  
     1
  ```

  

##### 矩阵的秩

* 矩阵线性无关的行数或列数称为矩阵的秩。
* rank(A):求矩阵A的秩。

##### 矩阵的迹

* 矩阵的迹等于矩阵的对角线元素之和，也等于矩阵的特征值之和。

* trace(A):求矩阵A的迹。

  ```matlab
  >> A
  
  A =
  
       1     2     3
       1     4     9
       1     8    27
  
  >> trace(A)
  
  ans =
  
      32
  
  >> sum(diag(A))
  
  ans =
  
      32
  ```

  

##### 矩阵的范数

* norm(V)或norm(V,2):计算向量V的2—范数。
* norm(V,1):计算向量V的1—范数。
* norm(V,inf):计算向量V的oo—范数。

##### 矩阵的条件数

* 矩阵A的条件数等于A的范数与A的逆矩阵的范数的乘积。
* 条件数越接近于1，矩阵的性能越好，反之，矩阵的性能越差。
* cond(A,1):计算A的1—范数下的条件数。
* cond(A)或cond(A,2):计算A的2—范数下的条件数。
* cond(A,inf):计算A的co—范数下的条件数。

### 2.4矩阵的特征值与特征向量

设A是n阶方阵，如果存在常数入和n维非零列向量x，使得等式Ax=入x成立，则称入为A的特征值，x是对应特征值入的特征向量。

* E=eig(A):求矩阵A的全部特征值，构成向量E。

* [X,D]=eig(A):求矩阵A的全部特征值，构成对角阵D，并产生矩阵x，X各列是相应的特征向量。

  ```matlab
  >> A*X(:,1) 
  
  ans =
  
     -3.5884
     -9.8665
    -28.0418
  
  >> D(1)*X(:,1)
  
  ans =
  
     -3.5884
     -9.8665
    -28.0418
  
  ```

  

### 2.5稀疏矩阵

* 完全存储方式
* 稀疏存储方式
  * 稀疏存储方式只存储矩阵的非零元素的值及其位置，即行号和列号。
* 完全存储方式与稀疏存储方式之间的转化
  * A=sparse(S):将矩阵S转化为稀疏存储方式的矩阵A。
  * S=full(A):将矩阵A转化为完全存储方式的矩阵S。

## 三、Matlab程序流程控制

* 程序和程序设计
  * 程序是用某种计算机能够理解并且能够执行的语言来描述的解决问题的方法和步骤。
  * 程序设计的基本步骤：分析问题，确定求解问题的数学模型或方法--》设计算法，并画出流程图--》选择编程工具，根据算法编写程序--》调试程序，分析程序输出结果
* 脚本文件函数文件
  * 脚本文件是可以在命令行窗直接执行的文件，也叫命令文件。
  * 函数文件是定义一个函数，不能直接执行，而必须以函数调用的方式来调用它。
* 文件的建立
  * 主页板块--》新建脚本
  * `edit <filename>`
* 脚本文件直接使用或者调用函数
  * 在工作目录下直接输入文件名完成文件调用
  * 在工作目录下直接输入文件名完成函数调用

### 3.1顺序结构程序

 * 数据的输入 input（提示信息）

 * 数据的输出 diso（输出数据）

 * 程序的暂停 pause（秒数）  Ctrl+c 强制结束程序

 * 例题：长度，以及黄金分割点C的坐标。有一线段AB，A的坐标为(1，1)，B的坐标为(4.5，4.5)，求AB的

   ```matlab
   >> edit test3
   >> test3
   输入a的坐标1+i
   输入b的坐标4.5+4.5i
       4.9497
   ```

   ```matlab
   a = input('输入a的坐标');
   b = input('输入b的坐标');
   l = abs(b-a);
   c = a+0.618*(b-a);
   disp(l);
   disp(c);
   ```

   

### 3.2if  语句实现选择结构

* 选择结构又称为分支结构，是根据给定的条件是否成立来决定程序的执行流程。

  if 条件

  ​	语句组1

  elseif

  ​	语句组2

  else

  ​	语句组3

  end

* 当条件结果为标量时，非零表示条件成立，零表示条件不成立。

* 当条件结果为矩阵时，如果矩阵为非空，且不包含零元素，则条件成立，否则不成立。

### 3.3switch语句实现选择结构

switch 表达式

​	case 结果表1

​		语句组

​	case 结果表2

​		语句组

·······

​	otherwise

​		语句组

end

```matlab
x = input('请输入一个数');
switch fix(x)
    case 1
        disp(fix(x));
    case 2
        disp(fix(x));
    otherwise
        disp('这个数字不好');
end
```

#### 输入一个英文单词，判断它是否以元音字母开头。

```matlab
s = input('请输入一个字母','s');
switch s(1)
    case {'A','E','I','O','U','a','e','i','o','u'}
        disp('它是元音字母');
    otherwise
        disp('他不是元音字母');
end
```



### 3.4for 语句实现循环结构

* 循环结构又称为重复结构，是利用计算机运算速度快以及能进行逻辑控制的特点来重复执行某些操作。

  for 循环变量=表达式1：表达式2：表达式3

  ​	循环语句

  end

  ```matlab
  for k=2:10
      disp(k);
  end
  ```

  > 循环取的是列向量

### 3.5while 语句实现循环结构

while 条件

​	循环条件语句

end

```matlab
n = 1;
while n<=10
    n=n+1;
    disp(n);
end
```

> 支持break  和  continue

### 3.6函数文件的定义与调用

function 输出形参表=函数名（输入形参表)

注释说明部分

函数体语句

调用格式:

​	[输出实参表]=函数名(输入实参表)

​	在调用函数时，函数输入输出参数称为实际参数，简称实参。

```matlab
function [s,q] = test10(r)
s = r^2*pi;
q = 2*2*pi;

```

```matlab
>> [s,q] = test10(3)

s =

   28.2743


q =

   12.5664
```



#### 匿名函数

基本格式:

​	丞数句柄变量=@(匿名函数输入参数)匿名函数表达式

```matlab
>> f = @(x,y) x^2+y^2

f =

  包含以下值的 function_handle:

    @(x,y)x^2+y^2

>> f(3,4)

ans =

    25

```



### 3.7函数的递归调用

```matlab
function [result]=njc(n)
if n==1
    result=1;
else 
    result=njc(n-1)*n;
end
```



### 3.8函数参数与变量的作用域

nargin 函数参数的输入个数   预定义变量

nargout 函数输出参数个数  预定义变量

global 变量1 变量2

## 四、Matlab绘图

#### 4.1二维曲线

##### plot函数

```matlab
xxxxxxxxxx >> a = [1,2,3,4];>> b = [1,2,3,4];>> plot(a,b);>> ca = a+b*ica =   1.0000 + 1.0000i   2.0000 + 2.0000i   3.0000 + 3.0000i   4.0000 + 4.0000i>> plot(ca)>> a = [2,1,6,2];>> plot(a)	matlab
```

##### 当x是向量，y是矩阵时

* 如果矩阵y的列数等于x的长度，则以向量x为横坐标，以y的每个行向量为纵坐标绘制曲线，曲线的条数等于y的行数。

* 如果矩阵y的行数等于x的长度，则以向量x为横坐标，以y的每个列向量为纵坐标绘制曲线，曲线的条数等于y的列数。

* ```matlab
  >> x = linspace(0,2*pi,100);
  >> y = [sin(x);sin(2*x);sin(0.5*x)];
  >> plot(x,y);
  ```

##### plot(x, y)函数参数的变化形式

* 当x、y是同型矩阵时以x、y对应列元素为横、纵坐标分别绘制曲线，曲线条数等于矩阵的列数。

  ```matlab
  >> t = 0:0.01:2*pi;
  >> t1 = t';
  >> T = [t1,t1,t1];
  >> Y = [sin(t1),sin(0.5*t1),sin(2*t1)];
  >> plot(T,Y);
  ```

##### 含多个输入参数的plot函数

* plot(x1, y1,x2,y2，…，xn,yn)

* 其中，每一向量对构成一组数据点的横、纵坐标，绘制一条曲线。

  ```matlab
  >> t = 0:0.01:2*pi;
  plot(t,sin(t),t,sin(2*t),t,sin(0.5*t));
  ```

##### 含选项的plot函数

* plot(x, y,选项)
* 线型  

|  -   |  实线  |
| :--: | :----: |
|  ：  |  虚线  |
|  -.  | 点划线 |
|  --  | 双划线 |

* 颜色

|  r   | 红色 |
| :--: | :--: |
|  g   | 绿色 |
|  b   | 蓝色 |
|  w   | 白色 |
|  k   | 黑色 |

* 数据点标记

|  *   |    星号    |
| :--: | :--------: |
|  o   |    圆圈    |
|  s   |    方块    |
|  p   |   五角星   |
|  ^   | 朝上三角形 |

* 

```matlab
>> x = (0:pi/50:2*pi)';
>> y1 = 2*exp(-0.5*x)*[-1,1];
>> y2 = 2*exp(-0.5*x).*sin(2*pi*x);
>> x1 = 0:0.5:6;
>> y3 = 2*exp(-0.5*x1).*sin(2*pi*x1);
>> plot(x,y1,'k:',x,y2,'b--',x1,y3,'rp');
```

##### fplot函数

* fplot函数的基本用法

  fplot(f, lims,选项)

  * 其中，f代表一个函数，通常采用函数句柄的形式。lims为x轴的取值范围，用二元向量[xmin，xmax]描述，默认值为[-5,5]。选项定义与plot函数相同。

    ```matlab
    fplot(@(x) sin(1./x),[0,0.02],'b') ;
    ```

    > fplot 自适应x的间隔

  * 双输入函数参数的用法

    * fplot(funx,funy, tlims,选项)其中，funx、funy代表函数，通常采用函数句柄的形式。tlims为参数函数funx和funy的自变量的取值范围，用二元向量[tmin，tmax]描述。

      ```matlab
       fplot(@(t) t.*sin(t),@(t) t.*cos(t),[0,10*pi],'r');
      ```

      

#### 4.2绘制图形的辅助操作

##### 给图形添加标注

* title(图形标题)

  * 在图形标题中使用LaTeX格式控制符

    |       title('y=cos{\omega}t')        | y =Coswt  |
    | :----------------------------------: | :-------: |
    |          title('y=e^faxt})           |  y=e axt  |
    |      title('X\_{1}\geq}X\_{2}')      |   X1≥X2   |
    | title(\bf y=cos{\omega}t + [fbeta}}) | y=coswt+β |

  * title(图形标题,属性名,属性值)

    ```matlab
    title('y=cos{\omega}t','Color','r');
    ```

    ```matlab
    x = -2*pi:0.05:2*pi;
    y = sin(x);
    plot(x,y,'r');
    title({'MATLAB','y=sin(x)'});
    ```

    

* xlabel(x轴说明)

  ```matlab
  xlabel('-2\pi\leqx\leq2\pi')
  ```

* ylabelly轴说明)

* text(x, y,图形说明)

  ```matlab
  text(-2*pi,0,'-2\pi');
  text(3,0.28,'\leftarrow sin(x)');
  ```

* legend(图例1，图例2，…)

  ```matlab
  x = linspace(0,2*pi,100);
  plot(x,[sin(x);sin(2*x);sin(0.5*x)]);
  legend('sinx','sin(2x)','sin(0.5x)');
  ```

##### 坐标控制

* axis函数
  * axis([xmin, xmax,ymin,ymax, zmin,zmax])
  * axis equal:纵、横坐标轴采用等长刻度
  * axis square:产生正方形坐标系(默认为矩形)
  * axis auto:使用默认设置
  * axis off:取消坐标轴
  * axis on:显示坐标轴
* 给坐标系加网格和边框
  * grid on
  * grid off
  * grid
  * box on
  * box off
  * box

##### 图形保持

​	在原有的图形上增添图形

* hold on

* hold off

* hold

  ```matlab
  t = linspace(0,2*pi,100);
  x = sin(t);y=cos(t);
  plot(x,y,'b');
  hold on;
  plot(2*x,2*y,'r--');
  grid on;
  axis([-2.2,2.2,-2.2,2.2])
  axis equal
  ```

##### 图形窗口的分割

subplot(2,2,1)  图形横向排开

#### 4.3其他形式的二维图形

##### 其他坐标系下的二维曲线图

###### 对数坐标

* 半对数曲线图

  * semilogx
  * semilogy

* 全对数曲线图

  * loglog

  ```matlab
  x = 0:0.1:10;
  y = 1./x;
  subplot(2,2,1);
  plot(x,y);
  title('x y');
  subplot(2,2,2);
  semilogx(x,y)
  title('semilogx');
  subplot(2,2,3);
  semilogy(x,y);
  title('semilogy');
  subplot(2,2,4);
  loglog(x,y);
  title('lohlog');
  ```

###### 极坐标

polar(theta,rho,选项)

其中,theta为极角，rho为极径，选项的内容与plot函数相同。

* ```matlab
  t = 0:pi/100:2*pi;
  r = 1-sin(t);
  subplot(1,2,1);
  polar(t,r);
  subplot(1,2,2);
  t1 = t-pi/2;
  r1 = 1-sin(t1);
  polar(t,r1);
  ```

##### 统计图

###### 条形图

* bar函数

  bar（y,style)   style:grouope 或者  stacked

  ```matlab
  y = [1,2,3,4;1,2,1,2;5,3,6,1];
  x = [2015,2016,2017];
  subplot(1,2,1);
  bar(x,y)
  title('Grouped');
  
  subplot(1,2,2);
  bar(x,y,'stacked');
  title('Stacked');
  ```

* barh函数  (水平条形图)

###### 直方图

* hist函数

  * hist(y,x) y为统计的数据  x为标量时为划分的个数  为向量时为中位数

    ```matlab
    y = randn(1,500);
    subplot(1,2,1);
    hist(y);
    title('y');
    subplot(1,2,2);
    x = -3:0.2:3;
    hist(y,x);
    title('指定区间中心点的直方图');
    ```

    

* rose函数

  ```matlab
  y = randn(1,500);
  theta = pi*y;
  rose(theta);
  title('在极坐标下的直方图');
  ```

###### 饼图

* 扇形图 pie()

  pie(x, explode)

  其中，参数x存储待统计数据，选项explode控制图块的显示模式。

  ```matlab
  y = [12,3,34,2,1];
  ex = [0,0,0,0,1];
  pie(y,ex);
  legend('优秀','良好','中等','及格','不及格','location','eastoutside');
  ```

* 面积图  area()

###### 散点图

* scatter函数：散点图

  scatter(x, y,选项, 'filled')

  参数x、y用于定位数据点，选项用于指定线型、颜色、数据点标记。

  ```matlab
  t = 0:pi/50:2*pi;
  x = 16*sin(t).^3;
  y = 13*cos(t)-5*cos(2*t)-2*cos(3*t)-cos(4*t);
  scatter(x,y,'rd','filled');
  ```

* stairs函数：阶梯图

* stem函数：杆图

##### 矢量图形

* compassK数:罗盘图

* feather函数:羽毛图

* quiver函数:箭头图

  * quiver(x, y,u, v)
  * 其中，(x, y)指定矢量起点，(u, v)指定矢量终点。

  ```matlab
  A = [4,5];B = [-10,0];C=A+B;
  hold on;
  quiver(0,0,A(1),A(2));
  quiver(0,0,B(1),B(2));
  quiver(0,0,C(1),C(2));
  text(A(1),A(2),'A');
  text(B(1),B(2),'B');
  text(C(1),C(2),'C');
  axis([-12,6,-1,6]);
  grid on;
  ```

  

#### 4.4三维曲线

##### plot3函数

plot3(x,y,z)

其中，参数x、y、z组成一组曲线的坐标。

```matlab
x=[0.2,1.8,2.5];
y=[1.3,2.8,1.1];
z=[0.4,1.2,1.6];
plot3(x, y,z)
grid on;
axis([0,3,1,3,0,2]);
```

plot3(x, y,z)

* 参数x、y、z是同型矩阵。  : 列对应

* 参数x、y、z中有向量，也有矩阵。 可列对应   也可行对应

  ```matlab
  t = 1:10;
  t1 = t.';
  x = t1;
  y = [t1,t1,t1];
  z = t1;
  plot3(x,y,z);
  grid on
  ```

  ```matlab
  t = 1:10;
  t1 = t.';
  x = t;
  y = [t;t;t];
  z = t;
  plot3(x,y,z);
  grid on
  ```

* 含多组输入参数的plot3函数

  * plot3(x1, y1, z1, x2, y2, z2, .... xn, yn, zn)每一-组x、y、z向量构成一-组数据点的坐标，绘制一条曲线。

##### fplot3函数

fplot3(funx, funy,funz, tlims)

其中，funx、funy、funz代表定义曲线x、y、z坐标的函数，通常采用函数句柄的形式。tlims为参数函数自变量的取值范围，用二元向量[tmin，tmax]描述﹐默认为[-5，5]。

#### 4.5三维曲面

1. 平面网格数据的生成

   * 利用矩阵运算生成

     ```matlab
     x = 2:6;
     y = (3:8).';
     X = ones(size(y))*x;
     Y = y*ones(size(x));
     
     ```

   * 利用meshgrid函数

     [X，Y=meshgrid(x, y);

     其中，参数x、y为向量，存储网格点坐标的X、Y为矩阵。

     ```matlab
     x = 2:6;
     y = 3:8;
     [X,Y] = meshgrid(x,y);
     Z = randn(size(X));
     plot3(X,Y,Z);
     grid on
     ```

   * mesh函数  ：三维网格图

   * 其中，x、y是网格坐标矩阵，z是网格点上的高度矩阵，c用于指定在不同高度下的曲面颜色。

     mesh(x, y，z,c)

     ```matlab
     t = -2:0.1:2;
     [X,Y] = meshgrid(t);
     Z = X.*exp(-X.^2-Y.^2);
     subplot(1,3,1);
     mesh(X,Y,Z);
     title('mesh');
     subplot(1,3,2);
     surf(X,Y,Z);
     title('surf');
     subplot(1,3,3);
     plot3(X,Y,Z);
     title('plot3');
     grid on;
     ```

   * surf函数 ：三维曲面图

     surf(x,y,z，c)

   * mesh函数和surf&数的其他调用格式:

     mesh(z, c)

     surf(z, c)

     当x、y省略时，z矩阵的第2维下标当作x轴坐标，z矩阵的第1维下标当作y轴坐标。

   * 带等高线的三维网格曲面函数meshc

   * 带底座的三维网格曲面函数meshz

   * 具有等高线的曲面函数surfc

   * 具有光照效果的曲面函数surf

2. sphere函数(三维球面)

   [x,y,z]=sphere(n)

3. cylinder函数（三维圆柱） R表示半径 n光滑程度

   [×, y, z]=cylinder(R, n)

   >sphere  和 cylinder 常作为mesh 和surf 的参数

1. fmesh函数和fsurf函数

   fsurf(funx, funy, funz, uvlims)

   fmesh(funx, funy, funz, uvlims)

   其中,funx、funy、funz代表定义曲面x、y、z坐标的函数，通常采用函数句柄的形式。uvlims为funx、funy和funz的自围，用4元向量[umin,umax,vmin, vmax]描述，变量的取值范默认为[-5,5,-5,5]。

   

#### 4.6图形修饰处理

##### 视点处理

##### 色彩处理

##### 裁剪处理

#### 4.7交互式绘图工具

## 五、数据分析与多项式计算

#### 数据统计分析

##### 求最大元素与最小元素

* min（）

* max（）

  ( 1 )y=max(X):返回向量X的最大值存入y，如果X中包含复数元素，则按模取最大值。

  ( 2)ly.k=max(X):返回向量X的最大值存入y，最大值元素的序号存入k，如果X中包含复数元素，则按模取最大值。

  当参数为矩阵时，函数有三种调用格式:

  (1) max(A):返回一个行向量，向量的第i个元素是矩阵A的第i列上的最大值

  (2)Y,U]=max(A):返回行向量Y和U，Y向量记录A的每列的最大值，U向量记录每列最大值元素的行号。

  ( 3 ) max(A,[],dim): dim取1或2。dim取1时，该函数的功能和max(A)完全相同;dim取2时，该函数返回一个列向量，其第i个元素是A矩阵的第i行上的最大值。

```matlab
A=[13,56,78;25,63,235;78,25,563;1,0,-1];
max(A)
max(A,[],2)
max(max(A))
```

##### 求平均值与中值

* 平均值:指算术平均值，即每项数据之和除以项数。

* 中值:指在数据序列中其值的大小恰好处在中间的元素。如果数据个数为奇数，则取值为大小位于中间的元素;如果数据个数为偶数，则取中间两个元素的平均值。
* mean()
* median()

##### 求和与求积

* sum()  求和
* prod()   求积

##### 累加和与累乘积

* cumsum()   累加和
* cumprod()    累乘积

```matlab
>> A = 1:10;
prod(A)
cumprod(A)

ans =

     3628800


ans =

           1           2           6          24         120         720        5040       40320      362880     3628800
```

##### 求标准差与相关系数

* 标准差用于计算数据偏离平均数的距离的平均值.

std( ):计算标准差函数。

​	调用格式:

​	( 1) std(X):计算向量X的标准差。

​	( 2 ) std(A):计算矩阵A的各列的标准差。

​	( 3 ) std(A,flag,dim):flag取O或1，当flag=O时，按S所列公式计算样本标准差;当flag=1时，按Sz所列公式计算总体标准差。默认情况下，flag=0，dim=1。

```matlab
>> A = randn(5000,4); 
>> y1 = std(A,0,1) ;
>> y2 = std(A,1,1) ;
>> y3 = std(A,0,2) ;
>> y4 = std(A,1,2).' ;
```

* 相关系数

  (1 ) corrcoef(A):返回由矩阵A所形成的一个相关系数矩阵，其中，第i行第j列的元素表示原矩阵A中第i列和第j列的相关系数。

  ( 2 ) corrcoef(X,Y):在这里，X、Y是向量，它们与corrcoef([X,Y])的作用一样，用于求X、Y向量之间的相关系数。

##### 排序

sort():排序函数。

​	调用格式:

​	( 1)sort(X):对向量X按升序排列。

​	(2）[Y,l]=sort(A,dim,mode)

​	其中，dim指明对A的列还是行进行排序。mode指明按升序还是降序排序，若取“ascend”，则按升序;若取“descend”，则按降序，默认为升序。输出参数中，Y是排序后的矩阵，而l记录Y中的元素在A中位置。

```matlab
>> A = [2:6;3:7;9:-1:5] 

A =

     2     3     4     5     6
     3     4     5     6     7
     9     8     7     6     5

>> sort(A)

ans =

     2     3     4     5     5
     3     4     5     6     6
     9     8     7     6     7

>> sort(A,2,'ascend')

ans =

     2     3     4     5     6
     3     4     5     6     7
     5     6     7     8     9

>> sort(A,2,'descend')

ans =

     6     5     4     3     2
     7     6     5     4     3
     9     8     7     6     5

>> [A,l] = sor(A,1,'descend')
未定义函数或变量 'sor'。
 
是不是想输入:
>> [A,l] = sort(A,1,'descend') 

A =

     9     8     7     6     7
     3     4     5     6     6
     2     3     4     5     5


l =

     3     3     3     2     2
     2     2     2     3     1
     1     1     1     1     3

```

#### 多项式计算

##### 多项式的表示

在MATLAB中，n次多项式用一个长度为n+1的行向量表示。如有n次多项式:

​	p()=a,x"+a,x”+a,2x+…十aX+ao

则在MATLAB中，p×表示为向量形式:

​	la,an-1,an-2,… ,a,ao]

在MATLAB中创建多项式向量时，注意三点:

* (1）多项式系数向量的顺序是从高到低。
* (2）多项式系数向量包含0次项系数，所以其长度为多项式最高次数加
* (3）如果有的项没有，系数向量相应位置应用0补足。

##### 多项式的四则运算

(1）多项式的加减运算

​	多项式的加减运算非常简单，即相应向量相加减。

(2）多项式乘法

​	conv (P1,P2):多项式相乘函数。在这里，P1、P2是两个多项式系数向量。

(3）多项式除法

IQ,r]=deconv(P1,P2):多项式相除函数。其中，Q返回多项式PI除以P2的商式，r返回P1除以P2的余式。这里，Q和r仍是多项式系数向量。deconv是conv的逆函数，因此有Pl=conv(Q,P2)+r

* 例l设f)=3x5-5x4-7x2+5x+6，g(x)=3x2+5x-3，求f(x)+g(x)，f(x)-g(x)，f(x)·g(x)，f(x)/g(x)。

```matlab
>> f=[3,-5,0,-7,5,6];g=[3,5,-3];g1=[0,0,0,g];
f+g1

ans =

     3    -5     0    -4    10     3

>> conv(f,g1)

ans =

     0     0     0     9     0   -34    -6   -20    64    15   -18

>> f-g1

ans =

     3    -5     0   -10     0     9

>> [Q,r] = deconv(f,g)

Q =

    1.0000   -3.3333    6.5556  -16.5926


r =

         0         0         0         0  107.6296  -43.7778

>> conv(g,Q)=r
下标索引必须为正整数类型或逻辑类型。
 
>> conv(g,Q)+r 

ans =

    3.0000   -5.0000         0   -7.0000    5.0000    6.0000
```

##### 多项式的求导

polyder( ):多项式求导函数。

调用格式:

​	(1)p=polyder(P):求多项式P的导函数。

​	( 2) p=polyder(P,Q):求P·Q的导函数。

​	( 3 )[p.ql=polyder(P,Q):求P/Q的导函数，导函数的分子存入p，分母存入q。

##### 多项式的求值

* polyval(p,x):代数多项式求值。

  其中，p为多项式系数向量;x可以是标量、向量或矩阵。若x为标量，则求多项式在该点的值;若x为向量或矩阵，则对向量或矩阵中的每个元素求多项式的值。

* polyvalm(p,×):矩阵多项式求值。

  其调用格式与polyval相同，但含义不同。polyvalm函数要求x为方阵，以方阵为自变量求多项式的值。设A为方阵，P代表多项式x3-5x2+8，那么polyvalm(P,A)的含义是:

  ​			A*A*A-5*A*A+8*eye(size(A))

##### 多项式的求根

* roots(p):多项式求根函数。其中，p为多项式的系数向量。

* 若已知多项式的全部根，则可以用poly函数建立起该多项式，其调用格式为:

  p=poly(x)

  ```matlab
  p=[-38.89,126.11,-3.42];
  x = 0:0.05:2;
  y = polyval(p,x);
  plot(x,y);
  axis([-0.5,2.5,-10,110]);
  grid on;
  hold on;
  p2 = polyder(p);
  result_x = roots(p2);
  disp(result_x);
  result_y = polyval(p,result_x);
  disp(result_y);
  plot(result_x,result_y,'rp');
  ```

  

#### 数据插值

数据插值可以根据有限个点的取值状况，合理估算出附近其他点的取值，从而节约大量的实验和测试资源，节省大量的人力、物力和财力。

##### interp1函数 一维差值

调用格式:

Y=interp1[X,Y,X1,method)

根据×、Y的值，计算函数在×1处的值。其中，×、Y是两个等长的已知向量，分别表示采样点和采样值。×1是一个向量或标量，表示要插值的点。

* 差值方法
  * (1) linear:线性插值，默认方法。将与插值点靠近的两个数据点用直线连接，然后在直线上选取对应插值点的数据。
  * (2) nearest:最近点插值。选择最近样本点的值作为插值数据。
  * ( 3 ) pchip:分段3次埃尔米特插值。采用分段三次多项式，除满足插值条件，还需满足在若干节点处相邻段插值函数的一阶导数相等，使得曲线光滑的同时，还具有保形性。
  * ( 4 ) spline:3次样条抽值。母下分段内2日二三A在减的，阶和二阶函数除满足插值条件外，还要求在各节点处具有连续的一阶和二阶导数。

##### interp 2():二维插值函数。

调用格式:

​	Z1=interp2(X,Y,Z,X1,Y1,method)

其中，×、Y是两个向量，表示两个参数的采样点，Z是采样点对应的函数值。X1、Y是两个标量或向量，表示要插值的点。 

#### 数据插值应用举例

#### 曲线拟合

polyfit( ):多项式拟合函数。

调用格式:

​	(1) P=polyfit(X,Y,m)

​	( 2)[P,S]=polyfit(x,Y,m)

​	(3 )[P,S,mu]=polyfit(x,Y,m)

根据样本数据X和Y，产生一个m次多项式P及其在采样点误差数据S，mu是一个二元向量，mu(1)是mean(X),而mu(2)是std(X)。

#### 曲线拟合应用举例

```matlab
x = 1950:10:2010;
y = [150.7 179.3 203.2 226.5 248.7 281.4 308.7];
p = polyfit(x,y,2);
plot(x,y,'*',x,polyval(p,x));
```


# Matlab

matrix laboratory 矩阵实验室

## matlab语言的主要功能

* 数值计算
* 符号计算
* 图形绘制
* 程序流程控制
* 工具箱

## 一、matlab基础知识

### 1.1 MATLAB系统环境

#### 切换工作路径

```matlab
>> cd D:\Desktop\work
>> 
```

#### 工作区/工作空间

显示当前存在变量的详细信息

#### matlab的搜索路径

变量-->内部函数-->当前文件夹下的程序文件-->文件搜索路径文件夹中的程序文件

```matlab
>> clear
>> x = sin(1)

x =

    0.8415

>> sin = [1 2 3 4 5]

sin =

     1     2     3     4     5

>> x = sin(1)

x =

     1
```

> 可以看出当变量名和内部函数名冲突时，变量名优先于内部函数  

> 建议不要使用关键词作为变量名

#### matlab文件搜索路径

```matlab
>> path(path,'D:\Desktop\work')
>> 
```

或者使用  主页-->设置路径

### 1.2 MATLAB数值数据

#### 数值数据的类型分类

* 整型

  * 不带符号整数 8位 16位 32位 64位
  * 带符号整数 8位 16位 32位 64位

  ```matlab
  >> x = int8(129)
  
  x =
  
    int8
  
     127
  
  >> x = uint8(129)
  
  x =
  
    uint8
  
     129
  
  ```

  > 注意数据类型的范围大小

* 浮点型

  浮点型可以分为单精度（4B）和双精度（8B）

  *  single函数 ：将其他类型的数据转换为单精度类型
  * double函数：将其他类型的数据转换为双精度类型

  ```matlab
  >> class(4)
  
  ans =
  
  double
  >> class(single(4))
  
  ans =
  
  single
  ```

  > class()  显示参数的数据类型

* 复数型

  复型数据包括实部和虚部两个部分，实部和虚部默认为双精度型，虚数单位用i或者是j来表示

  ```matlab
  >>  6+5i
  
  ans =
  
     6.0000 + 5.0000i
  
  >> 6+5j
  
  ans =
  
     6.0000 + 5.0000i
  ```

  * real函数  求复数的实部
  * imag函数 求复数的虚部

  ```matlab
  >> real(a)
  
  ans =
  
       6
  
  >> imag(a)
  
  ans =
  
       8
  ```

#### 数据的输出格式

```matlab
>> format long
>> 50/3

ans =

  16.666666666666668

>> format
>> 50/3

ans =

   16.6667
```

#### 常用数学函数

* exp（）MATLAB中我们常常需要用到自然数对数底数 e ,需要输入e 的不同次幂，那么我们在MATLAB中具体应如何操作呢？

  ```matlab
  >> a = [1,2;3,4] 
  
  a =
  
       1     2
       3     4
  
  >> B = exp(a) 
  
  B =
  
      2.7183    7.3891
     20.0855   54.5982
  ```

* 三角函数有以弧度为单位的函数和以角度为单位的函数，如果是以角度为单位的函数就在函数名后面加“d”，以示区别。

  ```matlab
  >> sin(pi/2)
  
  ans =
  
       1
  
  >> sind(90)
  
  ans =
  
       1
  ```

* abs函数可以求实数的绝对值、复数的模、字符串的ASCII码值。

  ```matlab
  >> abs(-4)
  
  ans =
  
       4
  
  >> abs(1+3i)
  
  ans =
  
      3.1623
  
  >> abs('a')
  
  ans =
  
      97
  ```

* 用于取整的函数有fix、floor、ceil、round。

  * round函数按照四舍五入的规则取整。
  * ceil函数是向上取整，取大于等于这个数的第一个整数。
  * floor函数是向下取整，取小于等于这个数的第一个整数。
  * fix函数是固定取靠近0的那个整数，即舍去小数取整。

  ```matlab
  >> round(3.7)
  
  ans =
  
       4
  
  >> ceil(-3.6)
  
  ans =
  
      -3
  
  >> floor(3.7)
  
  ans =
  
       3
  
  >> fix(2.7)
  
  ans =
  
       2
  ```

* 求一个三位正整数的个位 百位 十位

  ```matlab
  >> m = 345
  
  m =
  
     345
  
  >> m1 = rem(m,100) %对m模100
  
  m1 =
  
      45
  
  >> m2 = fix(m/100)
  
  m2 =
  
       3
  
  >> m3 = fix(m1/10)
  
  m3 =
  
       4
  
  >> m4 = rem(m,10)
  
  m4 =
  
       5
  ```

* 输出1到100的所有素数

  ```matlab
  >> m = 1:100;
  >> m1 = isprime(m);   %
  >> m2 = find(m1);
  >> m3 = m(m2)
  
  m3 =
  
    1 至 23 列
  
       2     3     5     7    11    13    17    19    23    29    31    37    41    43    47    53    59    61    67    71    73    79    83
  
    24 至 25 列
  
      89    97
  ```

  

### 1.3变量及其操作

#### 变量命名规则

变量以字母开头，后接字母、数字或者是下划线的字符序列最多63个字符

* 区分大小写
* 标准函数名以及命令名必须要小学字母

#### 赋值语句两种格式

* 变量=表达式
* 表达式（默认将结果赋值给预定变量ans）

> 命令行后面加分号，不显示运算结果

```matlab
>> x = sqrt(7)-2i

x =

   2.6458 - 2.0000i

>> y = exp(pi/2);
>> z = ((5+cosd(47))/(1+abs(x-y))) 

z =

    1.4395
```

#### 预定义变量

预定义变量是系统本身定义的变量

* ans是默认赋值变量
* i和j是虚数单位
* pi是圆周率
* NaN是非数

#### 变量的管理

* 变量的删除和修改（可在工作空间鼠标右键进行操作）

* who 和whos

  ```matlab
  >>  who
  
  您的变量为:
  
  x  y  z  
  
  >> whos
    Name      Size            Bytes  Class     Attributes
  
    x         1x1                16  double    complex   
    y         1x1                 8  double              
    z         1x1                 8  double           
  ```

#### 内存变量文件

用于保存MATLAB工作区变量的文件叫做内存变量文件，其扩展名为.mat，也叫MAT文件。

* save命令：创建内存变量文件

* load命令：装入内存变量文件

  ```matlab
  >>  cd D:\Desktop\work
  >> save mydata x y z
  >> clear
  >> load mydata
  ```

  > mydata 为文件名 可随意取文件名

### 1.4MATLAB矩阵的表示

#### 矩阵的建立

1. 利用直接输入法建立矩阵:将矩阵的元素用中括号括起来，按矩阵行的顺序输入各元素，同一行的各元素之间用逗号或空格分隔，不同行的元素之间用分号分隔。

```matlab
>> A = [1,2,3;4,5,6;7,8,9]

A =

     1     2     3
     4     5     6
     7     8     9
```

2. 利用已建好的矩阵建立更大的矩阵:一个大矩阵可以由已经建立好的小矩阵拼接而成。

   ```matlab
   >> A = [1,2,3;4,5,6;7,8,9]
   
   A =
   
        1     2     3
        4     5     6
        7     8     9
   
   >> A = [1,2,3;4,5,6;7,8,9]
   
   A =
   
        1     2     3
        4     5     6
        7     8     9
   
   >> B = [-1,-2,-3;-4,-5,-6;-7,-8,-9];
   >> C = [A,B;B,A]
   
   C =
   
        1     2     3    -1    -2    -3
        4     5     6    -4    -5    -6
        7     8     9    -7    -8    -9
       -1    -2    -3     1     2     3
       -4    -5    -6     4     5     6
       -7    -8    -9     7     8     9
   ```

3. 可以用实部矩阵和虚部矩阵构成复数矩阵

   ```matlab
   >> A
   
   A =
   
        1     2     3
        4     5     6
        7     8     9
   
   >> B
   
   B =
   
       -1    -2    -3
       -4    -5    -6
       -7    -8    -9
   
   >> D = A+Bi
   未定义函数或变量 'Bi'。
    
   >> D = A+B*i
   
   D =
   
      1.0000 - 1.0000i   2.0000 - 2.0000i   3.0000 - 3.0000i
      4.0000 - 4.0000i   5.0000 - 5.0000i   6.0000 - 6.0000i
      7.0000 - 7.0000i   8.0000 - 8.0000i   9.0000 - 9.0000i
   ```

4. 冒号表达式

   e1:e2:e3    初始值 步长  终止值

   ```matlab
   >> E = 1:2:10
   
   E =
   
        1     3     5     7     9
   ```

   > 省略步长则默认步长为1

5. linspace函数

   linspace(起始值，结束值，个数)

   ```matlab
   >>  linspace(1,10,10)
   
   ans =
   
        1     2     3     4     5     6     7     8     9    10
   ```

   > 当个数省略时，产生100个元素

#### 结构矩阵和单位矩阵

* 结构矩阵

  格式为   结构矩阵元素.成员名=表达式

  ```matlab
  >> a(1).x = '1';a(1).y='2';a(1).z='3';
  >> a(2).x = 1;a(2).y=2;a(2).z=3
  
  a = 
  
    包含以下字段的 1×2 struct 数组:
  
      x
      y
      z
  ```

* 单元矩阵

  建立单元矩阵和一般矩阵相似，直接输入就可以了，只是单元矩阵元素用大括号括起来。

  ```matlab
  >> a = {'a','b',[1,2,3];'c','d',[4,5,6]}
  
  a =
  
    2×3 cell 数组
  
      'a'    'b'    [1×3 double]
      'c'    'd'    [1×3 double]
  ```

### 1.5矩阵元素的引用

* 通过下标来引用矩阵的元素

  ```matlab
  >> a = [1:5;6:10;11:15]
  
  a =
  
       1     2     3     4     5
       6     7     8     9    10
      11    12    13    14    15
  
  >> a(2,2)
  
  ans =
  
       7
  
  >> a(10,10)=10
  
  a =
  
       1     2     3     4     5     0     0     0     0     0
       6     7     8     9    10     0     0     0     0     0
      11    12    13    14    15     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0     0
       0     0     0     0     0     0     0     0     0    10
  ```

* 通过序号来引用

  * 在MATLAB中，矩阵元素按列存储，即首先存储矩阵的第一列元素，然后存储第二列元素，…，—直到矩阵的最后一列元素。
  * 矩阵元素的序号就是矩阵元素在内存中的排列顺序。

  ```matlab
  a =
  
       1     2     3
       4     5     6
  
  >> a(3)
  
  ans =
  
       2
  ```

  > 序号与下标是一—对应的，以m×n矩阵A为例，矩阵元素A(i.j)的序号为(j-1)×m+i。

#### sub2ind函数

将下标转换成存储的序号

```matlab
a =

     1     2     3
     4     5     6
>> D = sub2ind(size(a),[1,2;2,2],[1,2;1,1]) 

D =

     1     4
     2     2
```

#### ind2sub函数

ind2sub将序号转换为下标

```matlab
>> [I,J] = ind2sub([3,3],[1,3,5])

I =

     1     3     2


J =

     1     1     2
```

#### 利用冒号表达式获得子矩阵

```matlab
>> a = [1:5;6:10;11:15]

a =

     1     2     3     4     5
     6     7     8     9    10
    11    12    13    14    15

>> a(1,2,:)

ans =

     2

>> a(1:2,:)

ans =

     1     2     3     4     5
     6     7     8     9    10

>> a(1,1:3:5)

ans =

     1     4

>> a(1,[1,3,5]) 

ans =

     1     3     5

>> a(2:3,1:2:5)

ans =

     6     8    10
    11    13    15
```

#### end运算符

表示某一维的尾末下标

```matlab
A =

     1     2     3     4     5
     6     7     8     9    10
    11    12    13    14    15

>> A(end)

ans =

    15

>> A(2:3,end)

ans =

    10
    15
```

#### 利用空矩阵删除矩阵的元素

```matlab
>> A

A =

     1     2     3     4     5
     6     7     8     9    10
    11    12    13    14    15

>> A(:,2:3)=[]

A =

     1     4     5
     6     9    10
    11    14    15
```

#### 改变矩阵的形状

reshape(A,m,n):在矩阵总元素保持不变的前提下，将矩阵A重新排成m×n的二维矩阵。

> 注意: reshape函数只是改变原矩阵的行数和列数，但并不改变原矩阵元素个数及其存储顺序。

```matlab
>> B = [1:12]

B =

     1     2     3     4     5     6     7     8     9    10    11    12

>> C = reshape(B,3,4)

C =

     1     4     7    10
     2     5     8    11
     3     6     9    12
```

#### A(:)

将矩阵A的每一列元素堆叠起来，成为一个列向量。

```matlab

>> C

C =

     1     4     7    10
     2     5     8    11
     3     6     9    12

>> D = C(:)

D =

     1
     2
     3
     4
     5
     6
     7
     8
     9
    10
    11
    12
```



### 1.6 MATLAB基本运算

#### 算数运算

基本算术运算符:＋(加)、一(减)、*(乘)、/(右除)、\(左除)、^(乘方)。

* MATLAB的算术运算是在矩阵意义下进行的。
* 单个数据的算术运算的一种特例。

##### 加减运算

  * 若两矩阵同型，则运算时两矩阵的相应元素相加减。
  * 若不同型Matlab将会报错
  * 一个标量也可以和矩阵进行加减运算，这时把标量和矩阵的每一个元素进行加减运算。

##### 乘法运算

* 知矩阵A和B进行乘法运算，要求A的列数与B的行数相等，此时则称A、B炬阵是可乘的，或称A和B两矩阵维数和大小相容。
* 如果两者的维数或大小不相容，则将给出错误信息，提示用户两个矩阵是不可乘的。

##### 除法运算

* 在MATLAB中，有两种矩阵除法运算:右除/和左除\。
* 如果A矩阵是非奇异方阵，则B/A等效于`B*inv(A)`，A\B等效于`inv(A)*B`。

> inv(A) 返回矩阵的逆矩阵  
>
> 含有标量的除法可以左除和右除结果一样

##### 乘方运算

* 一个矩阵的乘方运算可以表示成A^x，要求A为方阵，x为标量

  ```matlab
  >> A
  
  A =
  
       1     4     5
       6     9    10
      11    14    15
  
  >> A^2
  
  ans =
  
      80   110   120
     170   245   270
     260   380   420
  ```

##### 点运算

* 点运算符:   `.*`      `./`    `.\`     `.^`。

* 两矩阵进行点运算是指它们的对应元素进行相关运算，要求两矩阵同型。

  ```matlab
  >> A
  
  A =
  
       1     4     5
       6     9    10
      11    14    15
  
  >> A+A
  
  ans =
  
       2     8    10
      12    18    20
      22    28    30
  
  >> A*A
  
  ans =
  
      80   110   120
     170   245   270
     260   380   420
  
  >> A.*
   A.*
      ↑
  错误: 表达式或语句不完整或不正确。
   
  >> A.* A
  
  ans =
  
       1    16    25
      36    81   100
     121   196   225
  ```

#### 关系运算

* 关系运算符:<(小于)、<=(小于或等于)、>(大于)、>=(大于或等于)、==(等于)、～=(不等于)。

* 当两个比较量是标量时，直接比较两数的大小。若关系成立，关系表达式结果为1，否则为0。

  ```matlab
  >> 6>=9
  
  ans =
  
    logical
  
     0
  ```

* 当参与比较的量是两个同型的矩阵时，比较是对两矩阵相同位置的元素按标量关系运算规则逐个进行，最终的关系运算的结果是一个与原矩阵同型的矩阵，它的元素由0或1组成。

* 当参与比较的一个是标量，而另一个是矩阵时，则把标量与矩阵的每一个元素按标量关系运算规则逐个比较，最终的关系运算的结果是一个与原矩阵同型的矩阵，它的元素由0或1组成。

  ```matlab
  A =
  
       1     4     5
       6     9    10
      11    14    15
  
  >> P = rem(A,2)==0
  
  P =
  
    3×3 logical 数组
  
     0   1   0
     1   0   1
     0   1   0
  ```

#### 逻辑运算

* 逻辑运算符:&(与)、I(或)和～(非)。

* 设参与逻辑运算的是两个标量a和b，那么运算规则为:

  * a&b a、b全为非零时，运算结果为1，否则为0。
  * alba、b中只要有一个为非零时，运算结果为1。
  * ~a当a为零时，运算结果为1;当a为非零时，运算结果为0。

* 若参与逻辑运算的是两个同型矩阵，那么将对矩阵相同位置若参与逻辑运算的是两个同型矩阵，那么将对矩阵相同位置原矩阵同型的矩阵，其元素由1或0组成。1.7字符串处理

* 若参与逻辑运算的一个是标量，一个是矩阵，那么将在标量与矩阵中的每个元素之间按标量规则逐个进行运算，最终运算结果是一个与原矩阵同型的矩阵，其元素由1或0组成。

* 水仙花数

  ```matlab
  >> m = 100:999;
  >> m1 = rem(m,10);
  >> m2 = fix(rem(m,100)/10)
  >> m3 = fix(m/100); 
  >> k = find(m==m1.*m1.*m1+m2.*m2.*m2+m3.*m3.*m3)
  
  k =
  
      54   271   272   308
  
  >> m(k)
  
  ans =
  
     153   370   371   407
  
  ```

### 1.7字符串处理

* 在MATLAB中，字符串是用单引号括起来的字符序列。

```matlab
>> str1 = 'asdjlja'

str1 =

asdjlja

>> str1(1:3)

ans =

asd

```

* 若字符串中的字符含有单引号，则该单引号字符要用两个单引号来表示。

  ```matlab
  
  >> str2 = 'I''m a teacher'
  
  str2 =
  
  I'm a teacher
  ```

* 建立多行字符串，形成字符串矩阵。

  ```matlab
  >> mat_str3 = ['abcd';'1234']
  
  mat_str3 =
  
  abcd
  1234
  
  >> mat_str3
  
  mat_str3 =
  
  abcd
  1234
  
  >> mat_str3(2,3)
  
  ans =
  
  3
  ```

* 建立一个字符串向量，然后对该向量做如下处理:

  * ①取第1～5个字符组成的子字符串。

  * ②将字符串倒过来重新排列。

  * ③将字符串中的小写字母变成相应的大写字母，其余字符不变。

  * ④统计字符串中小写字母的个数。

    ```matlab
    >> ch = 'ABc123d4e56Fg9'
    
    ch =
    
    ABc123d4e56Fg9
    
    >> sub = ch(1:5)
    
    sub =
    
    ABc12
    
    >> revch = ch(end:-1:1)
    
    revch =
    
    9gF65e4d321cBA
    
    >> k = find(ch>'a' | ch<'z')
    
    k =
    
         1     2     3     4     5     6     7     8     9    10    11    12    13    14
    
    >> k = find(ch>='a' & ch<='z') 
    
    k =
    
         3     7     9    13
    
    >> ch(k) = ch(k)-('a'-'A')
    
    ch =
    
    ABC123D4E56FG9
    
    >> length(k)
    
    ans =
    
         4
    ```

#### 字符串的执行

eval(s)

```matlab

>> eval('1+2')

ans =

     3
```

#### 字符串与数值之间的转换

* abs和double函数都可以用来获取字符串矩阵所对应的ASCII码数值矩阵。

* char函数可以把ASCII码矩阵转换为字符串矩阵。

  ```matlab
  >> s1 = 'MATLAB'
  
  s1 =
  
  MATLAB
  
  >> abs(s1)
  
  ans =
  
      77    65    84    76    65    66
  
  >> char(abs(s1)+32)
  
  ans =
  
  matlab
  ```

#### 字符串的比较

字符串的比较有两种方法:利用关系运算符或字符串比较函数。

* 关系运算符比较:两个字符串里的每个字符依次按ASCI值大小逐个进行比较，比较的结果是一个数值向量，向量中的元素要么是1，要么是0。

  ```matlab
  >> s2 = 'W123';
  >> s3 = 'w123';
  >> s2 == s3
  
  ans =
  
    1×4 logical 数组
  
     0   1   1   1
  ```

* 字符串比较函数用于判断字符串是否相等，有4种比较方式，函数如下:
  * strcmp(s1,s2):用来比较字符串s1和s2是否相等，如果相等，返回结果为1，否则返回0。
  * strncmp(s1,s2,n):用来比较字符串s1和s2前n个元素是否相等，如果相等，返回结果为1，否则返回0。
  * strcmpi(s1,s2):在忽略大小写的情况下用来比较字符串s1和s2是否相等，如果相等，返回结果为1，否则返回0。
  * strncmpi(s1,s2,n):在忽略大小写的情况下用来比较字符串s1和s2前n个元素是否相等，如果相等，返回结果为1，否则返回0。

#### 字符串的查找与替换

* findstr(s1,s2)︰返回短字符串在长字符串中的开始位置。

* strrep(s1,s2,s3):将字符串s1中的所有子字符串s2替换为字符串s3

* rand函数:产生（0，1）区间均匀分布的随机矩阵。

* randn函数:产生均值为0，方差为1的标准正态分布随机矩阵。

  ```matlab
  >> p = findstr('is','where is here? is asdjl is ') 
  
  p =
  
       7    16    25
   >> result = strrep(' this is a good idea! is','is','aa')
  
  result =
  
   thaa aa a good idea! aa
  ```


## 二、Matlab矩阵处理

### 2.1特殊矩阵

#### 通用的特殊矩阵

* zeros函数：产生全零矩阵，即零矩阵
* ones函数：产生全一矩阵，即幺矩阵
* eye函数：产生对角线为1的矩阵，当矩阵是方阵时，得到单位矩阵
* rand函数:产生（o，1)区间均匀分布的随机矩阵。
* randn函数:产生均值为0，方差为l的标准正态分布随机矩阵。

```matlab

>> zeros(2,2)

ans =

     0     0
     0     0

>> ones(3,5)

ans =

     1     1     1     1     1
     1     1     1     1     1
     1     1     1     1     1

>> eye(3,3)

ans =

     1     0     0
     0     1     0
     0     0     1
```

* 例1：首先产生5阶两位随机整数矩阵A，再产生均值为0.6、方差为0.1的5阶正态分布随机矩阵B，最后验证(A+B)l=lA+BI(l为单位矩阵）。

  ```matlab
  >> A = fix(rand(5)*90+10)
  
  A =
  
      88    48    22    86    16
      17    91    88    65    31
      45    26    62    41    21
      33    33    59    56    26
      82    23    23    46    31
  
  >> B = randn(5)*sqrt(0.1)+0.6
  
  B =
  
      0.4313    0.5890    1.0273    0.2458    0.3263
     -0.0333    0.3476    0.5289    1.3988    0.5442
      0.9049    0.9221    0.4137    1.1235    0.8503
      0.7645    0.5579    0.5071    0.6973    0.1788
      0.5937    0.3740    0.3319    0.2025   -0.1368
  
  >> E = eye(5)
  
  E =
  
       1     0     0     0     0
       0     1     0     0     0
       0     0     1     0     0
       0     0     0     1     0
       0     0     0     0     1
  
  >> (A+B)*E == E*A+B*E
  
  ans =
  
    5×5 logical 数组
  
     1   1   1   1   1
     1   1   1   1   1
     1   1   1   1   1
     1   1   1   1   1
     1   1   1   1   1
  ```

  * rand函数:产生(0，1)开区间均匀分布的随机数x。
  * fix(a+(b-a+1)*x):产生la，b]区间上均匀分布的随机整数。
  * randn函数:产生均值为0、方差为l的标准正态分布随机数x。
  * u+σ×:得到均值为u、方差为σ平方的随机数。

#### 魔方矩阵

* n阶魔方阵由1,2,3,…,n2共n2个整数组成，且每行、每列以及主、副对角线上各n个元素之和都相等。

* n阶魔方阵每行每列元素的和为(7+2+3+…+n2)/n=(n+n的三次方)/2。

  ```matlab
  >> D = magic(3)
  
  D =
  
       8     1     6
       3     5     7
       4     9     2
  ```

#### 范德蒙矩阵

```matlab
>> vander(1:5) 

ans =

     1     1     1     1     1
    16     8     4     2     1
    81    27     9     3     1
   256    64    16     4     1
   625   125    25     5     1

>> vander(5:10) 

ans =

        3125         625         125          25           5           1
        7776        1296         216          36           6           1
       16807        2401         343          49           7           1
       32768        4096         512          64           8           1
       59049        6561         729          81           9           1
      100000       10000        1000         100          10           1
```

#### 希尔伯特矩阵

```matlab
>> format rat
>> hilb(5)

ans =

       1              1/2            1/3            1/4            1/5     
       1/2            1/3            1/4            1/5            1/6     
       1/3            1/4            1/5            1/6            1/7     
       1/4            1/5            1/6            1/7            1/8     
       1/5            1/6            1/7            1/8            1/9     

```

#### 伴随矩阵

MATLAB生成伴随矩阵的函数是compan(p)，其中p是一个多项式的系数向量，高次幂系数排在前，低次幂系数排在后。

```matlab
>> compan([-1,0,2,3,0,1])

ans =

       0              2              3              0              1       
       1              0              0              0              0       
       0              1              0              0              0       
       0              0              1              0              0       
       0              0              0              1              0   
```

#### 帕斯卡矩阵

```matlab
>> format rat
>> A = pascal(6)

A =

       1              1              1              1              1              1       
       1              2              3              4              5              6       
       1              3              6             10             15             21       
       1              4             10             20             35             56       
       1              5             15             35             70            126       
       1              6             21             56            126            252       

>> inv(A)

ans =

       6            -15             20            -15              6             -1       
     -15             55            -85             69            -29              5       
      20            -85            146           -127             56            -10       
     -15             69           -127            117            -54             10       
       6            -29             56            -54             26             -5       
      -1              5            -10             10             -5              1  
```



### 2.2矩阵变换

##### 对角阵

* 对角矩阵:只有对角线上有非零元素的矩阵。
* 数量矩阵:对角线上的元素相等的对角矩阵。
* 单位矩阵:对角线上的元素都为1的对角矩阵。

1. 提取矩阵的对角线元素

   1. diag(A):提取矩阵A主对角线元素，产生一个列向量。
   2. diag(A,k):提取矩阵A第k条对角线的元素，产生一个列向量。

2. 构造对角矩阵

   1. diag(V):以向量V为主对角线元素，产生对角矩阵。

   2. diag(V,k):以向量V为第k条对角线元素，产生对角矩阵。

   3. 例题：建立5x5的矩阵A，对矩阵的第一行x1第二行x2一次类推

      ```matlab
      >> D = diag(1:5)
      
      D =
      
           1     0     0     0     0
           0     2     0     0     0
           0     0     3     0     0
           0     0     0     4     0
           0     0     0     0     5
      
      >> A = [1:5;6:10;11:15;16:20;21:25]
      
      A =
      
           1     2     3     4     5
           6     7     8     9    10
          11    12    13    14    15
          16    17    18    19    20
          21    22    23    24    25
      
      >> D*A
      
      ans =
      
           1     2     3     4     5
          12    14    16    18    20
          33    36    39    42    45
          64    68    72    76    80
         105   110   115   120   125
      ```

   > 对角矩阵左乘 即乘行   右乘 即乘列

##### 三角阵

* 上三角阵:矩阵的对角线以下的元素全为零的矩阵。  triu(A,n)

* 下三角阵:对角线以上的元素全为零的矩阵。 tril(A,n)

  ```matlab
  >> A = ones(4)
  
  A =
  
       1     1     1     1
       1     1     1     1
       1     1     1     1
       1     1     1     1
   >> B = triu(A)
  
  B =
  
       1     1     1     1
       0     1     1     1
       0     0     1     1
       0     0     0     1
  
  >> B = triu(A,1) 
  
  B =
  
       0     1     1     1
       0     0     1     1
       0     0     0     1
       0     0     0     0
  ```

##### 矩阵的转置

* 转置运算符是小数点后面接单引号(.'）。

* 共扼转置，其运算符是单引号(')，它在转置的基础上还要取每个数的复共辄。

  ```matlab
  >> A = [1,2;1-2i,2+3i]
  
  A =
  
     1.0000 + 0.0000i   2.0000 + 0.0000i
     1.0000 - 2.0000i   2.0000 + 3.0000i
  
  >> A.'
  
  ans =
  
     1.0000 + 0.0000i   1.0000 - 2.0000i
     2.0000 + 0.0000i   2.0000 + 3.0000i>> A'
  
  ans =
  
     1.0000 + 0.0000i   1.0000 + 2.0000i
     2.0000 + 0.0000i   2.0000 - 3.0000i
  ```

##### 矩阵的旋转

rot90(A,k):将矩阵A逆时针方向旋转90°的k倍，当k为1时可省略。

```matlab
>> A

A =

   1.0000 + 0.0000i   2.0000 + 0.0000i
   1.0000 - 2.0000i   2.0000 + 3.0000i
>> rot90(A,1) 

ans =

   2.0000 + 0.0000i   2.0000 + 3.0000i
   1.0000 + 0.0000i   1.0000 - 2.0000i

>> rot90(A,2)

ans =

   2.0000 + 3.0000i   1.0000 - 2.0000i
   2.0000 + 0.0000i   1.0000 + 0.0000i

```



##### 矩阵的翻转

fliplr(A) :对矩阵左右翻转

flipud：对矩阵上下翻转

```matlab
>> A = [1:5;6:10;11:15;16:20;21:25]

A =

     1     2     3     4     5
     6     7     8     9    10
    11    12    13    14    15
    16    17    18    19    20
    21    22    23    24    25
>> fliplr(A)

ans =

     5     4     3     2     1
    10     9     8     7     6
    15    14    13    12    11
    20    19    18    17    16
    25    24    23    22    21
 >> flipud(A)

ans =

    21    22    23    24    25
    16    17    18    19    20
    11    12    13    14    15
     6     7     8     9    10
     1     2     3     4     5
```

##### 验证魔方阵的主对角线和副对角线元素之和相等

```matlab
>> A = magic(5)

A =

    17    24     1     8    15
    23     5     7    14    16
     4     6    13    20    22
    10    12    19    21     3
    11    18    25     2     9

>> B = diag(A)

B =

    17
     5
    13
    21
     9

>> C = flipud(A)

C =

    11    18    25     2     9
    10    12    19    21     3
     4     6    13    20    22
    23     5     7    14    16
    17    24     1     8    15

>> D = diag(C)

D =

    11
    12
    13
    14
    15

>> sum(B)

ans =

    65

>> sum(D)

ans =

    65
```



##### 矩阵求逆

* 对于一个方阵A，如果存在一个与其同阶的方阵B，使得AB=BA=l(I为单位矩阵)，则称B为A的逆矩阵，当然，A也是B的逆矩阵。

* inv(A)  求方阵A的逆矩阵

* A*x=b   x=A-1*b   求解方程组

  ```matlab
  >> A = [1,2,3;1,4,9;1,8,27];
  >> b = [5;-2;6];
  >> x = inv(A)*b
  
  x =
  
     23.0000
    -14.5000
      3.6667
  ```

### 2.3矩阵求值

##### 矩阵的行列式值

* 把一个方阵看作一个行列式，并对其按行列式的规则求值，这个值就称为方阵所对应的行列式的值。

* det(A):求方阵A所对应的行列式的值。

* 验证A的行列式的倒数和A的逆矩阵行列式值相等

  ```matlab
  >> A = [1,2,3;1,4,9;1,8,27];
  >> A
  
  A =
  
       1     2     3
       1     4     9
       1     8    27
    
  >> 1/det(A)==det(inv(A)) 
  
  ans =
  
    logical
  
     1
  ```

  

##### 矩阵的秩

* 矩阵线性无关的行数或列数称为矩阵的秩。
* rank(A):求矩阵A的秩。

##### 矩阵的迹

* 矩阵的迹等于矩阵的对角线元素之和，也等于矩阵的特征值之和。

* trace(A):求矩阵A的迹。

  ```matlab
  >> A
  
  A =
  
       1     2     3
       1     4     9
       1     8    27
  
  >> trace(A)
  
  ans =
  
      32
  
  >> sum(diag(A))
  
  ans =
  
      32
  ```

  

##### 矩阵的范数

* norm(V)或norm(V,2):计算向量V的2—范数。
* norm(V,1):计算向量V的1—范数。
* norm(V,inf):计算向量V的oo—范数。

##### 矩阵的条件数

* 矩阵A的条件数等于A的范数与A的逆矩阵的范数的乘积。
* 条件数越接近于1，矩阵的性能越好，反之，矩阵的性能越差。
* cond(A,1):计算A的1—范数下的条件数。
* cond(A)或cond(A,2):计算A的2—范数下的条件数。
* cond(A,inf):计算A的co—范数下的条件数。

### 2.4矩阵的特征值与特征向量

设A是n阶方阵，如果存在常数入和n维非零列向量x，使得等式Ax=入x成立，则称入为A的特征值，x是对应特征值入的特征向量。

* E=eig(A):求矩阵A的全部特征值，构成向量E。

* [X,D]=eig(A):求矩阵A的全部特征值，构成对角阵D，并产生矩阵x，X各列是相应的特征向量。

  ```matlab
  >> A*X(:,1) 
  
  ans =
  
     -3.5884
     -9.8665
    -28.0418
  
  >> D(1)*X(:,1)
  
  ans =
  
     -3.5884
     -9.8665
    -28.0418
  
  ```

  

### 2.5稀疏矩阵

* 完全存储方式
* 稀疏存储方式
  * 稀疏存储方式只存储矩阵的非零元素的值及其位置，即行号和列号。
* 完全存储方式与稀疏存储方式之间的转化
  * A=sparse(S):将矩阵S转化为稀疏存储方式的矩阵A。
  * S=full(A):将矩阵A转化为完全存储方式的矩阵S。

## 三、Matlab程序流程控制

* 程序和程序设计
  * 程序是用某种计算机能够理解并且能够执行的语言来描述的解决问题的方法和步骤。
  * 程序设计的基本步骤：分析问题，确定求解问题的数学模型或方法--》设计算法，并画出流程图--》选择编程工具，根据算法编写程序--》调试程序，分析程序输出结果
* 脚本文件函数文件
  * 脚本文件是可以在命令行窗直接执行的文件，也叫命令文件。
  * 函数文件是定义一个函数，不能直接执行，而必须以函数调用的方式来调用它。
* 文件的建立
  * 主页板块--》新建脚本
  * `edit <filename>`
* 脚本文件直接使用或者调用函数
  * 在工作目录下直接输入文件名完成文件调用
  * 在工作目录下直接输入文件名完成函数调用

### 3.1顺序结构程序

 * 数据的输入 input（提示信息）

 * 数据的输出 diso（输出数据）

 * 程序的暂停 pause（秒数）  Ctrl+c 强制结束程序

 * 例题：长度，以及黄金分割点C的坐标。有一线段AB，A的坐标为(1，1)，B的坐标为(4.5，4.5)，求AB的

   ```matlab
   >> edit test3
   >> test3
   输入a的坐标1+i
   输入b的坐标4.5+4.5i
       4.9497
   ```

   ```matlab
   a = input('输入a的坐标');
   b = input('输入b的坐标');
   l = abs(b-a);
   c = a+0.618*(b-a);
   disp(l);
   disp(c);
   ```

   

### 3.2if  语句实现选择结构

* 选择结构又称为分支结构，是根据给定的条件是否成立来决定程序的执行流程。

  if 条件

  ​	语句组1

  elseif

  ​	语句组2

  else

  ​	语句组3

  end

* 当条件结果为标量时，非零表示条件成立，零表示条件不成立。

* 当条件结果为矩阵时，如果矩阵为非空，且不包含零元素，则条件成立，否则不成立。

### 3.3switch语句实现选择结构

switch 表达式

​	case 结果表1

​		语句组

### 3.4for 语句实现循环结构

### 3.5while 语句实现循环结构

### 3.6函数文件的定义与调用

### 3.7函数的递归调用

### 3.8函数参数与变量的作用域

